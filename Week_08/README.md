学习笔记

# 位运算

由于计算机都是使用二进制运算的，所以对于整数的运算，采用位运算会速度更快

## 符号位

对于二进制的整数，正数的符号位为 0，负数的符号位为 1

## 位运算符

1. 位运算符只适用于整数
2. 运算方式是将整数转换为二进制，按位运算

### 按位与 &

只有 `1&1 = 1`，其它情况都为 0

* 如 ：

  13 的 5位二进制为  01101

  17 的 5位二进制为  10001

  13&17

  得到二进制结果为    00001

  即数字 1

* 简单应用：

  1. 判断整数的奇偶

     奇数 & 1 = 1

     偶数 & 1 = 0

  2. 把一个二进制数 a 当成一个集合，集合中已存在的元素标记为 1 ，未存在的标记为 0 。

     要查找从右往左第 n 个元素是否存在，通过 a & (1<<n) = 0，说明不存在；若不等于 0 ，说明已存在

### 按位或 |

只有 `0|0 = 0`，其它情况都为 1

* 如 ：

  13 的 二进制为  001101

  17 的 二进制为  010001

  13|17

  得到二进制结果为    011101

  即数字 29

* 简单应用：
  1. 任何数 按位或 0  = 自身
  2. 把一个二进制数当成一个集合，集合中已存在的元素标记为 1 ，未存在则标记为 0 ，通过按位或的运算，可以往集合中添加元素

### 按位反 ~

`~0 = 1，~1 = 0`

* 如 ：

  13 的 5位二进制为  01101

  ~13

  得到二进制结果为    10010

  即数字 18  或者 -14（负整数的二进制 = 正整数的反码+1）

* 简单应用：

  对于一个整数 x，都有 ~x = -（x+1）

### 按位异或 ^

`0^1=1^0=1,0^0=1^1=0` 按位相同，异或结果为 0；不同则结果为 1

* 如 ：

  13 的 二进制为  001101

  17 的 二进制为  010001

  13^17

  得到二进制结果为    011100

  即数字 68

* 简单应用：

  1. 任意数 按位异或 0 = 自身

  2. 任意数 按位异或 自身 = 0

  3. 某个整型数组中有一个数只出现 1 次，其它数都出现 偶数次，查找只出现 1 次的数：

     ```python 
     from functools import reduce
     
     def get_one(nums):
         return reduce(lambda x,y:x^y,nums)
     get_one([1,1,4,3,2,3,4])
     # 出现偶数次的数通过按位异或，结果为 0
     # 0 与 只出现1次的数 按位异或 ，得到自身
     ```

### 左移位 <<

将原来的二进制向左移动 n 位，最低位补 0 ，相当于 乘以 2 的 n次方

* 如 ：

  13 的 二进制为  001101

  13<<2

  得到二进制结果为    110100

  即数字 52

### 右移位 >>

将原来的二进制向右移动 n 位，最低位丢弃 ，最高位补 符号位，相当于 整除 2 的 n次方

* 如 ：

  13 的 二进制为  001101

  13>>2

  得到二进制结果为    000011

  即数字 3